<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>登录</title>
    <script src="js/jquery-3.3.1.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/popper.min.js"></script>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/bootstrap3.7.css">
    <link rel="stylesheet" href="css/icon/iconfont.css">
    <style>
        html{
            height:100%;
        }
        body{
            height: 100%;
        }
        .container-fluid{
            height: 100%;
            margin: 0;
            padding: 0;
        }
        .login{
           width: 300px;
           height: 86%;
           margin: 0 auto;
           display: flex;
           align-items: center;
           /* border-left: 1px solid #000; */
           /* border-right: 1px solid #000; */
        }
        .footer{
            width: 100%;
            height: 14%;
            background: #f5f5f5;
            text-align: center;
            font-size: 12px;
        }
        .footer p:last-child{
            color: #999;
        }
        .logo{
            text-align: center;
            width: 100%;
            height: auto;
            margin-bottom: 5%;
            /* border: 1px solid #000; */
        }
        .input-group{
            width: 100%;
            height: 14%;
        }
        .input-group-text {
            background-color: #fff;
            border: none;
            cursor: pointer;
            padding: 0;
        }
        .get-code{
            position: absolute;
            right: 5px;
            z-index: 100;
            top: 30%;
        }
        .get-code span{
            color: #ccc;
        }
        .font-color{
            color: #e8694c;
        }
        .phone-number{
            height: 100%;
        }
        .btn{
            background: #e54c2a;
            color: #fff;
            height: 13%;
        }
        section{
            width: 100%;
            height: 40%;
            /* padding-top: 100%; */
        }
        section p {
            margin-bottom: 8%;
            color: #999;
        }
        section a {
            text-decoration: none!important;
            color: #e8694c;
        }
        a:hover{
            text-decoration: none;
        }
        
        .choose_login{
            margin-bottom: 2%!important;
            text-align: right;
            color: #999!important;
            width: 100%;
            display: inline-block;
        }
        .choose_login i{
            color: #e8694c;
        }
        .choose_login:hover{
            color: #999;
        }
    </style>
</head>

<body>
    <div class="container-fluid">
        <div class="login">
            <section>
                <div class="logo">
                    <img src="img/login-logo.png" alt="" class="">
                </div>
    
                <div class="input-group mb-3 phone-div">
                    <input type="text" class="form-control phone-number" placeholder="手机号" maxlength="11" id="uid">
                    <div class="input-group-append get-code">
                        <span class="input-group-text" id="">获取验证码</span>
                    </div>
                </div>
                <div class="input-group mb-3 phone-div">
                    <input type="text" class="form-control phone-number" placeholder="验证码" id="upwd">
                </div>
                <a class="choose_login" href="#">
                    <span>
                        普通方式登录
                    </span>
                    <i class="iconfont">&#xe6a2;</i>
                </a>
                <p>
                    新用户登录即自动注册，并表示已同意<a href="#">《用户服务协议》</a>
                </p>
                <button class="btn form-control" onclick="login()">登录</button>
            </section>

        </div>
        <div class="footer">
            <p>所有方：个人作品</p>
            <p>增值电信业务许可证：沪B2-20150033 | 沪ICP备 09007032 | 上海工商行政管理Conpyright @2008-2017 ele me,All Rights Resereved</p>
        </div>
    </div>
    <script>
        $('.choose_login').click(function(){
            if ($('.choose_login span').text().trim() == '普通方式登录') {
                $('.choose_login span').text('手机验证码登录'); 
                $('.choose_login i').html('&#xe6b9;'); 
            } else {
                $('.choose_login span').text('普通方式登录'); 
                $('.choose_login i').html('&#xe6a2;'); 
                // $('.phone-number').html();
            }
            // alert($('.choose_login span').text().trim());
        })
        function login(){
            var xhr = new XMLHttpRequest();

            xhr.onreadystatechange = function () {
                if (xhr.readyState == 4 && xhr.status) {
                    var result = xhr.responseText;
                    var arr = JSON.parse(result);
                    if (arr.code == 200) {
                        location.href='http://127.0.0.1:3000/index.html';
                    } else {
                        alert('登录失败');
                    }
                }
            }

            xhr.open('post', '/user/login', true);
            xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
            
            var data = `name=${uid.value}&password=${upwd.value}`;
            xhr.send(data);
        }
    </script>
</body>

</html>